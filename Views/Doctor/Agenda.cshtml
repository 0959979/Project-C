@model zorgapp.ViewModels.AgendaViewModel
@{
    ViewData["Title"] = "Agenda";
}
<br>
<form asp-controller="Doctor" asp-action="Agenda" method="post">
    <h2>Agenda</h2>
    @ViewBag.Recieved
    <table class="table">
        <thead>
            <tr>
                <th></th>
                <th>
                    <input type="submit" name="previous" value="Previous" />
                    <input type="hidden" name="dayoffset" value="@Model.dayOffset" />
                </th>
                <th></th>
                <!--
                <th></th>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
                -->
                <th><input type="submit" name="next" value="Next" /></th>
            </tr>
            <tr>
                <th bgcolor="#e6e6e6">
                    <h4>Time</h4>
                </th>
                @for (int d = 0; d < 7; d++)
                {
                    @if (Model.CurrentDate == d && Model.sameWeek)
                    {
                        <th bgcolor="#e6e6ff">
                            <font>
                                <h4>@Html.DisplayFor(modelItem => Model.Days[d])</h4>
                                <h5>@Html.DisplayFor(modelItem => Model.Dates[d])</h5>
                            </font>
                        </th>
                    }
                    else
                    {
                        <th>
                            <h4>@Html.DisplayFor(modelItem => Model.Days[d])</h4>
                            <h5>@Html.DisplayFor(modelItem => Model.Dates[d])</h5>
                        </th>
                    }

                }
            </tr>
        </thead>
        <tbody>
            @for (int h = 0; h < Model.Hours.Count(); h++)
            {
                string hour = Model.Hours[h];
                int houri = Model.Hoursi[h];
                <tr>
                    <td bgcolor="#f2f2f2">
                        @Html.DisplayFor(modelItem => hour)
                    </td>

                    @for (int d = 0; d < 7; d++)
                    {
                        @if (Model.CurrentDate == d && Model.sameWeek)
                        {
                            <td bgcolor=#f8f9ff>
                                @foreach (var App in Model.Appointments)
                                {
                                    @if (App.Date.Hour == houri && App.Date.DayOfWeek.ToString() == Model.Days[d])
                                    {
                                        <h5>@Html.DisplayFor(modelItem => App.Info)</h5>
                                        <h6>@Html.DisplayFor(modelItem => App.Date.Hour):@Html.DisplayFor(modelItem => App.Date.Minute)</h6>
                                    }
                                }
                            </td>
                        }
                        else
                        {
                            <td>
                                @foreach (var App in Model.Appointments)
                                {
                                    @if (App.Date.Hour == houri && App.Date.DayOfWeek.ToString() == Model.Days[d])
                                    {
                                        <h5>@Html.DisplayFor(modelItem => App.Info)</h5>
                                        <h6>@Html.DisplayFor(modelItem => App.Date.Hour):@Html.DisplayFor(modelItem => App.Date.Minute)</h6>
                                    }
                                }
                            </td>
                        }
                    }
                </tr>
            }
        </tbody>
    </table>
</form>

